---
import { GoogleFontsOptimizer } from "astro-google-fonts-optimizer";
import { readAdminWidgets } from "@/lib/widgets-admin/read-widgets";
import "@/styles/globals.css";
import Base from "@/layouts/base.astro";

const widgets = await readAdminWidgets();

export const prerender = false;
---

<Base title={`${import.meta.env.STORE_NAME} Admin`}>
  <Fragment slot="head">
    <GoogleFontsOptimizer
      url="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@700&display=swap"
    />
  </Fragment>
  <header>
    <div class="w-full flex border-b border-slate-200">
      <div class="max-w-xs w-full py-4 border-r border-slate-200">
        <p class="font-space text-xl text-center text-slate-800">Thestral</p>
      </div>
      <div class="grow"></div>
    </div>
  </header>
  <main class="h-full bg-slate-100">
    <aside class="h-full bg-white max-w-xs">
      <div
        class="max-w-xs flex flex-col gap-2 p-2 border-r border-slate-200 h-full"
      >
        {
          widgets.map((w) => (
            <div
              tab-index={0}
              class="flex justify-between items-center cursor-grab text-slate-700 select-none shadow-sm border border-solid px-4 py-2 border-slate-200 rounded-xl active:shadow-md active:scale-[101%] active:shadow-slate-300/75 hover:shadow-md hover:scale-[101%] transition-all shadow-slate-200 hover:shadow-slate-300/75 active:rotate-6 active:z-50 outline-2 outline-slate-600 bg-gradient-to-b from-white to-slate-50 duration-200 ease-in-out"
            >
              <div class="flex flex-col justify-center items-start">
                <p class="capitalize text-sm font-semibold">{w.name}</p>
                {w.description && <p class="text-sm">{w.description}</p>}
              </div>
              <svg
                width="15"
                height="15"
                viewBox="0 0 15 15"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  class="text-slate-700"
                  d="M5.5 4.625C6.12132 4.625 6.625 4.12132 6.625 3.5C6.625 2.87868 6.12132 2.375 5.5 2.375C4.87868 2.375 4.375 2.87868 4.375 3.5C4.375 4.12132 4.87868 4.625 5.5 4.625ZM9.5 4.625C10.1213 4.625 10.625 4.12132 10.625 3.5C10.625 2.87868 10.1213 2.375 9.5 2.375C8.87868 2.375 8.375 2.87868 8.375 3.5C8.375 4.12132 8.87868 4.625 9.5 4.625ZM10.625 7.5C10.625 8.12132 10.1213 8.625 9.5 8.625C8.87868 8.625 8.375 8.12132 8.375 7.5C8.375 6.87868 8.87868 6.375 9.5 6.375C10.1213 6.375 10.625 6.87868 10.625 7.5ZM5.5 8.625C6.12132 8.625 6.625 8.12132 6.625 7.5C6.625 6.87868 6.12132 6.375 5.5 6.375C4.87868 6.375 4.375 6.87868 4.375 7.5C4.375 8.12132 4.87868 8.625 5.5 8.625ZM10.625 11.5C10.625 12.1213 10.1213 12.625 9.5 12.625C8.87868 12.625 8.375 12.1213 8.375 11.5C8.375 10.8787 8.87868 10.375 9.5 10.375C10.1213 10.375 10.625 10.8787 10.625 11.5ZM5.5 12.625C6.12132 12.625 6.625 12.1213 6.625 11.5C6.625 10.8787 6.12132 10.375 5.5 10.375C4.87868 10.375 4.375 10.8787 4.375 11.5C4.375 12.1213 4.87868 12.625 5.5 12.625Z"
                  fill="currentColor"
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                />
              </svg>
            </div>
          ))
        }
      </div>
    </aside>
    <div></div>
  </main>
</Base>
